{"version":3,"file":"js/7.70a5e2d2.js","mappings":"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","sources":["webpack://erabbit-vue3/./src/api/goods.js","webpack://erabbit-vue3/./src/views/search/index.vue","webpack://erabbit-vue3/./src/components/search-sort.vue","webpack://erabbit-vue3/./src/components/search-sort.vue?3770","webpack://erabbit-vue3/./src/views/search/index.vue?e646"],"sourcesContent":["import request from '@/utils/request'\r\n/**\r\n * 商品分类\r\n * @param {*} id\r\n * @returns\r\n */\r\nexport const getTopCategory = (id) => request('/category', 'get', { id })\r\n/**\r\n * 搜索商品\r\n * @param {*} params\r\n * @returns\r\n */\r\nexport const getSearchGoods = (params) => request('/search/all', 'psot', params)\r\n/**\r\n * 商品详情\r\n * @param {Number} id 商品id\r\n * @returns\r\n */\r\nexport const getGoods = (id) => request('/goods', 'get', { id })\r\n","<template>\r\n  <div class=\"xtx-search-page\">\r\n    <div class=\"container\">\r\n      <XtxBread>\r\n        <XtxBreadItem to=\"/\">首页</XtxBreadItem>\r\n        <XtxBreadItem>搜索 \"{{ $route.query.keyword }}\" 的结果：</XtxBreadItem>\r\n      </XtxBread>\r\n      <div class=\"wrapper\">\r\n        <!-- 筛选区 -->\r\n        <SearchSort />\r\n        <!-- 结果区 -->\r\n        <ul class=\"good-list\">\r\n          <li v-for=\"item in list\" :key=\"item.id\"></li>\r\n          <GoodsItem :goods=\"item\" />\r\n        </ul>\r\n        <!-- 分页区 -->\r\n        <div v-if=\"!total\" class=\"none\">\r\n          <img src=\"@/assets/images/none.png\" alt=\"\" />\r\n          暂无数据\r\n        </div>\r\n        <XtxPagination\r\n          v-if=\"total\"\r\n          :total=\"total\"\r\n          :current-page=\"reqParams.page\"\r\n          :page-size=\"reqParams.pageSize\"\r\n          @current-change=\"changePager\"\r\n        ></XtxPagination>\r\n        <SearchFilter @change-filter=\"changeFilter\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchSort from '@/components/search-sort.vue'\r\nimport { onBeforeRouteUpdate, useRoute } from 'vue-router'\r\nimport { onMounted, reactive, ref } from 'vue'\r\nimport { getSearchGoods } from '@/api/goods'\r\nimport GoodsItem from '@/components/goods-item.vue'\r\nexport default {\r\n  name: 'xtx-search-page',\r\n  components: { SearchSort, GoodsItem },\r\n  setup() {\r\n    const route = useRoute()\r\n    const reqParams = reactive({\r\n      page: 1,\r\n      pageSize: 10,\r\n      keyword: route.query.keyword,\r\n      sortField: null,\r\n      sortMethod: null\r\n    })\r\n    const list = ref([])\r\n    const total = ref(0)\r\n    const loadData = async () => {\r\n      const { result } = await getSearchGoods(reqParams)\r\n      console.log('loadData', result)\r\n      list.value = result.pageData.items\r\n      total.value = result.pageData.counts\r\n    }\r\n    onMounted(() => {\r\n      loadData()\r\n    })\r\n    const changePager = (p) => {\r\n      reqParams.page = p\r\n      loadData()\r\n    }\r\n    const changeFilter = (filterParams) => {\r\n      reqParams.page = 1\r\n      reqParams.sortField = filterParams.sortField\r\n      reqParams.sortMethod = filterParams.sortMethod\r\n      loadData()\r\n    }\r\n    //\r\n    onBeforeRouteUpdate((to, from, next) => {\r\n      reqParams.page = 1\r\n      reqParams.keyword = to.query.keyword\r\n      reqParams.sortField = null\r\n      reqParams.sortMethod = null\r\n      loadData()\r\n      next()\r\n    })\r\n    //\r\n    onBeforeRouteUpdate((to, from, next) => {\r\n      reqParams.sortField = null\r\n      reqParams.sortMethod = null\r\n      next()\r\n    })\r\n    return { list, total, reqParams, changePager, changeFilter }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.xtx-search-page {\r\n  .wrapper {\r\n    background-color: #fff;\r\n    padding: 0 25px;\r\n    .goods-list {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      padding: 0 5px;\r\n      li {\r\n        margin-right: 20px;\r\n        margin-bottom: 20px;\r\n        &:nth-child(5n) {\r\n          margin-right: 0;\r\n        }\r\n      }\r\n    }\r\n    .none {\r\n      padding: 100px 0;\r\n      text-align: center;\r\n      color: #999;\r\n      img {\r\n        width: 100px;\r\n        height: 100px;\r\n        margin-right: 10px;\r\n        object-fit: contain;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"search-sort\">\r\n    <div class=\"sort\">\r\n      <a\r\n        :class=\"{ active: sortParams.sortField === null }\"\r\n        @click=\"changeSort(null)\"\r\n        href=\"javascript:;\"\r\n        >默认排序</a\r\n      >\r\n      <a\r\n        href=\"javascript:;\"\r\n        :class=\"{ active: sortParams.sortField === 'publishTime' }\"\r\n        @click=\"changeSort(publishTime)\"\r\n        >最新商品</a\r\n      >\r\n      <a\r\n        href=\"javascript:;\"\r\n        :class=\"{ active: sortParams.sortField === 'orderNum' }\"\r\n        @click=\"changeSort(orderNum)\"\r\n        >最高人气</a\r\n      >\r\n      <a\r\n        href=\"javascript:;\"\r\n        :class=\"{ active: sortParams.sortField === 'evaluateNum' }\"\r\n        @click=\"changeSort(evaluateNum)\"\r\n        >评论最多</a\r\n      >\r\n      <a href=\"javascript:;\" @click=\"changeSort('price')\">\r\n        价格排序\r\n        <i\r\n          class=\"arrow up\"\r\n          :class=\"{\r\n            active:\r\n              sortParams.sortField === 'price' && sortParams.sortMethod == 'asc'\r\n          }\"\r\n        />\r\n        <i\r\n          class=\"arrow down\"\r\n          :class=\"{\r\n            active:\r\n              sortParams.sortField === 'price' &&\r\n              sortParams.sortMethod == 'desc'\r\n          }\"\r\n        />\r\n      </a>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { reactive } from 'vue-demi'\r\nexport default {\r\n  name: 'SubSort',\r\n  emits: ['change-filter'],\r\n  setup(props, { emit }) {\r\n    const sortParams = reactive({ sortField: null, sortMethod: null })\r\n    const changeSort = (sortField) => {\r\n      if (sortField === 'price') {\r\n        sortParams.sortField = sortField\r\n        if (sortParams.sortMethod === null) {\r\n          sortParams.sortMethod = 'desc'\r\n        } else {\r\n          sortParams.sortMethod =\r\n            sortParams.sortMethod === 'desc' ? 'asc' : 'desc'\r\n        }\r\n      } else {\r\n        if (sortParams.sortField === sortField) return\r\n        sortParams.sortField = sortField\r\n        sortParams.sortMethod = null\r\n      }\r\n      emit('change-filter', sortParams)\r\n    }\r\n    return { sortParams, changeSort }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.search-sort {\r\n  height: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .sort {\r\n    display: flex;\r\n    a {\r\n      height: 30px;\r\n      line-height: 28px;\r\n      border: 1px solid #e4e4e4;\r\n      padding: 0 20px;\r\n      margin-right: 20px;\r\n      color: #999;\r\n      border-radius: 2px;\r\n      position: relative;\r\n      transition: all 0.3s;\r\n      &.active {\r\n        background: var(--xtx-color);\r\n        border-color: var(--xtx-color);\r\n        color: #fff;\r\n      }\r\n      .arrow {\r\n        position: absolute;\r\n        border: 5px solid transparent;\r\n        right: 8px;\r\n        &.up {\r\n          top: 3px;\r\n          border-bottom-color: #bbb;\r\n          &.active {\r\n            border-bottom-color: var(--xtx-color);\r\n          }\r\n        }\r\n        &.down {\r\n          top: 15px;\r\n          border-top-color: #bbb;\r\n          &.active {\r\n            border-top-color: var(--xtx-color);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./search-sort.vue?vue&type=template&id=4a149a1f&scoped=true\"\nimport script from \"./search-sort.vue?vue&type=script&lang=js\"\nexport * from \"./search-sort.vue?vue&type=script&lang=js\"\n\nimport \"./search-sort.vue?vue&type=style&index=0&id=4a149a1f&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\Users\\\\shuangjian\\\\Desktop\\\\science\\\\Little-rabbit-fresh-mall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4a149a1f\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=17fad278&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=17fad278&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\Users\\\\shuangjian\\\\Desktop\\\\science\\\\Little-rabbit-fresh-mall\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-17fad278\"]])\n\nexport default __exports__"],"names":["getTopCategory","id","request","getSearchGoods","params","getGoods","class","_createElementVNode","src","_imports_0","alt","_hoisted_7","_createElementBlock","_createVNode","_component_XtxBread","_component_XtxBreadItem","to","_toDisplayString","_ctx","query","keyword","_component_SearchSort","_Fragment","_renderList","$setup","item","key","_component_GoodsItem","goods","_hoisted_9","_createBlock","_component_XtxPagination","total","page","pageSize","onCurrentChange","_component_SearchFilter","onChangeFilter","active","sortField","onClick","href","sortMethod","name","emits","setup","props","emit","sortParams","reactive","changeSort","__exports__","components","SearchSort","GoodsItem","route","useRoute","reqParams","list","ref","loadData","async","result","console","log","value","pageData","items","counts","onMounted","changePager","p","changeFilter","filterParams","onBeforeRouteUpdate","from","next","render"],"sourceRoot":""}