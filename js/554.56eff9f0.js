"use strict";(self["webpackChunkerabbit_vue3"]=self["webpackChunkerabbit_vue3"]||[]).push([[554],{8554:function(e,t,a){a.r(t),a.d(t,{default:function(){return Tt}});var r=a(3396);const n=e=>((0,r.dD)("data-v-554c6b78"),e=e(),(0,r.Cn)(),e),i={class:"xtx-login-page"},o={class:"login-section"},l={class:"wrapper"},s=n((()=>(0,r._)("nav",null,[(0,r._)("a",{href:"javascript:;",class:"active"},"账户登录"),(0,r._)("a",{href:"javascript:;"},"扫码登录")],-1))),u=(0,r.Uk)(" Login ");function c(e,t,a,n,c,d){const v=(0,r.up)("LoginHeader"),f=(0,r.up)("LoginForm"),m=(0,r.up)("LoginFooter");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(v),(0,r._)("section",o,[(0,r._)("div",l,[s,(0,r.Wm)(f)])]),(0,r.Wm)(m),u])}const d=e=>((0,r.dD)("data-v-75d211b1"),e=e(),(0,r.Cn)(),e),v={class:"login-header"},f={class:"container"},m={class:"logo"},p=(0,r.Uk)("小兔鲜"),h={class:"sub"},y=(0,r.Uk)(" 进入网站首页 "),g=d((()=>(0,r._)("i",{class:"iconfont icon-angle-right"},null,-1))),b=d((()=>(0,r._)("i",{class:"iconfont icon-angle-right"},null,-1)));function V(e,t,a,n,i,o){const l=(0,r.up)("RouterLink");return(0,r.wg)(),(0,r.iD)("header",v,[(0,r._)("div",f,[(0,r._)("h1",m,[(0,r.Wm)(l,{to:"/"},{default:(0,r.w5)((()=>[p])),_:1})]),(0,r._)("h3",h,[(0,r.WI)(e.$slots,"default",{},void 0,!0)]),(0,r.Wm)(l,{class:"entry",to:"/"},{default:(0,r.w5)((()=>[y,g,b])),_:1})])])}var _={name:"LoginHeader"},w=a(89);const S=(0,w.Z)(_,[["render",V],["__scopeId","data-v-75d211b1"]]);var F=S;const k={class:"login-footer"},A=(0,r.uE)('<div class="container" data-v-58300caa><p data-v-58300caa><a href="javascript:;" data-v-58300caa>关于我们</a><a href="javascript:;" data-v-58300caa>帮助中心</a><a href="javascript:;" data-v-58300caa>售后服务</a><a href="javascript:;" data-v-58300caa>配送与验收</a><a href="javascript:;" data-v-58300caa>商务合作</a><a href="javascript:;" data-v-58300caa>搜索推荐</a><a href="javascript:;" data-v-58300caa>友情链接</a></p><p data-v-58300caa>CopyRight © 小兔鲜儿</p></div>',1),j=[A];function O(e,t,a,n,i,o){return(0,r.wg)(),(0,r.iD)("footer",k,j)}var E={name:"LoginFooter"};const D=(0,w.Z)(E,[["render",O],["__scopeId","data-v-58300caa"]]);var U=D,M=a(7139);const x=e=>((0,r.dD)("data-v-0c7bbb53"),e=e(),(0,r.Cn)(),e),L={class:"login-form"},T={class:"toggle"},C=x((()=>(0,r._)("i",{class:"iconfont icon-user"},null,-1))),B=(0,r.Uk)(" 使用账号登录 "),I=[C,B],W=x((()=>(0,r._)("i",{class:"iconfont icon-msg"},null,-1))),R=(0,r.Uk)(" 使用短信登录 "),P=[W,R],$={class:"form"},q={class:"form-item"},Z={class:"input"},H=x((()=>(0,r._)("i",{class:"iconfont icon-user"},null,-1))),Y={key:0,class:"error"},z={class:"iconfont icon-warning"},N={class:"form-item"},J={class:"input"},X=x((()=>(0,r._)("i",{class:"iconfont icon-lock"},null,-1))),G={key:0,class:"error"},K={class:"iconfont icon-warning"},Q={class:"form-item"},ee={class:"input"},te=x((()=>(0,r._)("i",{class:"iconfont icon-user"},null,-1))),ae={key:0,class:"error"},re={class:"iconfont icon-warning"},ne={class:"form-item"},ie={class:"input"},oe=x((()=>(0,r._)("i",{class:"iconfont icon-code"},null,-1))),le={key:0,class:"error"},se={class:"iconfont icon-warning"},ue={class:"form-item"},ce={class:"agree"},de=x((()=>(0,r._)("span",null,"我已同意",-1))),ve=x((()=>(0,r._)("a",{href:"javascript:;"},"《隐私条款》",-1))),fe=x((()=>(0,r._)("span",null,"和",-1))),me=x((()=>(0,r._)("a",{href:"javascript:;"},"《服务条款》",-1))),pe={key:0,class:"error"},he={class:"iconfont icon-warning"},ye=x((()=>(0,r._)("div",{class:"action"},[(0,r._)("div",{class:"url"},[(0,r._)("a",{href:"javascript:;"},"忘记密码"),(0,r._)("a",{href:"javascript:;"},"免费注册")])],-1)));function ge(e,t,a,n,i,o){const l=(0,r.up)("Field"),s=(0,r.up)("ErrorMessage"),u=(0,r.up)("Form");return(0,r.wg)(),(0,r.iD)("div",L,[(0,r._)("div",T,[n.isMsgLogin?((0,r.wg)(),(0,r.iD)("a",{key:0,href:"javascript:;",onClick:t[0]||(t[0]=e=>n.isMsgLogin=!1)},I)):((0,r.wg)(),(0,r.iD)("a",{key:1,href:"javascript:;",onClick:t[1]||(t[1]=e=>n.isMsgLogin=!0)},P))]),(0,r._)("div",$,[(0,r.Wm)(u,{ref:"formCom","validation-schema":n.formSchema,autocomplete:"off"},{default:(0,r.w5)((()=>[n.isMsgLogin?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("div",Q,[(0,r._)("div",ee,[te,(0,r.Wm)(l,{modelValue:n.form.mobile,"onUpdate:modelValue":t[4]||(t[4]=e=>n.form.mobile=e),name:"mobile",type:"text",placeholder:"请输入手机号"},null,8,["modelValue"])]),(0,r.Wm)(s,{name:"mobile"},{default:(0,r.w5)((({message:e})=>[e?((0,r.wg)(),(0,r.iD)("div",ae,[(0,r._)("i",re,(0,M.zw)(e),1)])):(0,r.kq)("",!0)])),_:1})]),(0,r._)("div",ne,[(0,r._)("div",ie,[oe,(0,r.Wm)(l,{modelValue:n.form.code,"onUpdate:modelValue":t[5]||(t[5]=e=>n.form.code=e),name:"code",type:"text",placeholder:"请输入验证码"},null,8,["modelValue"]),(0,r._)("span",{class:"code",onClick:t[6]||(t[6]=(...e)=>n.send&&n.send(...e))},(0,M.zw)(n.time>0?`${n.time}秒后发送`:"发送验证码"),1)]),(0,r.Wm)(s,{name:"code"},{default:(0,r.w5)((({message:e})=>[e?((0,r.wg)(),(0,r.iD)("div",le,[(0,r._)("i",se,(0,M.zw)(e),1)])):(0,r.kq)("",!0)])),_:1})])],64)):((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("div",q,[(0,r._)("div",Z,[H,(0,r.Wm)(l,{modelValue:n.form.account,"onUpdate:modelValue":t[2]||(t[2]=e=>n.form.account=e),name:"account",type:"text",placeholder:"请输入账号"},null,8,["modelValue"])]),(0,r.Wm)(s,{name:"account"},{default:(0,r.w5)((({message:e})=>[e?((0,r.wg)(),(0,r.iD)("div",Y,[(0,r._)("i",z,(0,M.zw)(e),1)])):(0,r.kq)("",!0)])),_:1})]),(0,r._)("div",N,[(0,r._)("div",J,[X,(0,r.Wm)(l,{modelValue:n.form.password,"onUpdate:modelValue":t[3]||(t[3]=e=>n.form.password=e),name:"password",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),(0,r.Wm)(s,{name:"password"},{default:(0,r.w5)((({message:e})=>[e?((0,r.wg)(),(0,r.iD)("div",G,[(0,r._)("i",K,(0,M.zw)(e),1)])):(0,r.kq)("",!0)])),_:1})])],64)),(0,r._)("div",ue,[(0,r._)("div",ce,[(0,r.Wm)(l,{modelValue:n.form.isAgree,"onUpdate:modelValue":t[7]||(t[7]=e=>n.form.isAgree=e),name:"isAgree",as:"XtxCheckbox"},null,8,["modelValue"]),de,ve,fe,me]),(0,r.Wm)(s,{name:"isAgree"},{default:(0,r.w5)((({message:e})=>[e?((0,r.wg)(),(0,r.iD)("div",pe,[(0,r._)("i",he,(0,M.zw)(e),1)])):(0,r.kq)("",!0)])),_:1})]),(0,r._)("a",{onClick:t[8]||(t[8]=(...e)=>n.submit&&n.submit(...e)),href:"javascript:;",class:"btn"},"登录")])),_:1},8,["validation-schema"])]),ye])}var be=a(4870);a(1703),a(6699);
/**
  * vee-validate v4.0.3
  * (c) 2020 Abdelrahman Awad
  * @license MIT
  */
function Ve(e){return"function"===typeof e}const _e=e=>null!==e&&!!e&&"object"===typeof e&&!Array.isArray(e),we={};function Se(e){return we[e]}function Fe(e){return Ve(e)&&!!e.__locatorRef}function ke(e){return["input","textarea","select"].includes(e)}function Ae(e,t){return ke(e)&&"file"===t}function je(e){return!!e&&Ve(e.validate)}function Oe(e){return"checkbox"===e||"radio"===e}function Ee(e){return Number(e)>=0}function De(e){return Array.isArray(e)?0===e.length:_e(e)&&0===Object.keys(e).length}function Ue(e){return/^\[.+\]$/i.test(e)}function Me(e){return Ue(e)?e.replace(/\[|\]/gi,""):e}function xe(e,t){if(e)return Ue(t)?e[Me(t)]:t.split(/\.|\[(\d+)\]/).filter(Boolean).reduce(((e,t)=>{if(e&&t in e)return e[t]}),e)}function Le(e,t,a){if(Ue(t))return void(e[Me(t)]=a);const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let i=0;i<r.length;i++){if(i===r.length-1)return void(n[r[i]]=a);r[i]in n||(n[r[i]]=Ee(r[i+1])?[]:{}),n=n[r[i]]}}function Te(e,t){Array.isArray(e)&&Ee(t)?e.splice(Number(t),1):delete e[t]}function Ce(e,t){if(Ue(t))return void delete e[Me(t)];const a=t.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let i=0;i<a.length;i++){if(i===a.length-1){Te(r,a[i]);break}if(!(a[i]in r))break;r=r[a[i]]}const n=a.map(((t,r)=>xe(e,a.slice(0,r).join("."))));for(let i=n.length-1;i>=0;i--)De(n[i])&&(0!==i?Te(n[i-1],a[i-1]):Te(e,a[0]))}function Be(e){return Object.keys(e)}function Ie(e,t){const a=(0,r.FN)();return(0,r.f3)(e,(null===a||void 0===a?void 0:a.provides[e])||t)}const We=e=>!!e&&(!!("undefined"!==typeof Event&&Ve(Event)&&e instanceof Event)||!(!e||!e.srcElement));function Re(e){if(!We(e))return e;const t=e.target;return Oe(t.type)&&"_value"in t?t._value:"file"===t.type&&t.files?Array.from(t.files):t.value}function Pe(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?Ve(e)||je(e)||_e(e)&&e._$$isNormalized?e:_e(e)?Object.keys(e).reduce(((t,a)=>{const r=$e(e[a]);return!1!==e[a]&&(t[a]=qe(r)),t}),t):"string"!==typeof e?t:e.split("|").reduce(((e,t)=>{const a=Ze(t);return a.name?(e[a.name]=qe(a.params),e):e}),t):t}function $e(e){return!0===e?[]:Array.isArray(e)||_e(e)?e:[e]}function qe(e){const t=e=>"string"===typeof e&&"@"===e[0]?He(e.slice(1)):e;return Array.isArray(e)?e.map(t):Object.keys(e).reduce(((a,r)=>(a[r]=t(e[r]),a)),{})}const Ze=e=>{let t=[];const a=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:a,params:t}};function He(e){const t=t=>{const a=t[e];return a};return t.__locatorRef=e,t}function Ye(e){return Array.isArray(e)?e.filter(Fe):Object.keys(e).filter((t=>Fe(e[t]))).map((t=>e[t]))}const ze=(e,t)=>e.slots.default?e.slots.default(t):e.slots.default,Ne={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Je=Object.assign({},Ne);const Xe=()=>Je;async function Ge(e,t,a={}){const r=null===a||void 0===a?void 0:a.bails,n={name:(null===a||void 0===a?void 0:a.name)||"{field}",rules:Pe(t),bails:null===r||void 0===r||r,formData:(null===a||void 0===a?void 0:a.values)||{}},i=await Ke(n,e),o=i.errors;return{errors:o}}async function Ke(e,t){if(je(e.rules))return Qe(e,t);if(Ve(e.rules)){const a=await e.rules(t,{field:e.name,form:e.formData}),r="string"!==typeof a&&a,n="string"===typeof a?a:tt({field:e.name,value:t,form:e.formData});return{errors:r?[]:[n]}}const a=[],r=Object.keys(e.rules),n=r.length;for(let i=0;i<n;i++){const n=r[i],o=await et(e,t,{name:n,params:e.rules[n]});if(o.error&&(a.push(o.error),e.bails))return{errors:a}}return{errors:a}}async function Qe(e,t){const a=await e.rules.validate(t,{abortEarly:e.bails}).then((()=>[])).catch((e=>{if("ValidationError"===e.name)return e.errors;throw e}));return{errors:a}}async function et(e,t,a){const r=Se(a.name);if(!r)throw new Error(`No such validator '${a.name}' exists.`);const n=at(a.params,e.formData),i={field:e.name,value:t,form:e.formData,rule:a},o=await r(t,n,i);return"string"===typeof o?{error:o}:{error:o?void 0:tt(i)}}function tt(e){const t=Xe().generateMessage;return t?t(e):"Field is invalid"}function at(e,t){const a=e=>Fe(e)?e(t):e;return Array.isArray(e)?e.map(a):Object.keys(e).reduce(((t,r)=>(t[r]=a(e[r]),t)),{})}const rt=Symbol("vee-validate-form"),nt=Symbol("vee-validate-form-errors"),it=Symbol("vee-validate-form-initial-values");let ot=0;function lt(e,t,a){const n=ot>=Number.MAX_SAFE_INTEGER?0:++ot,{initialValue:i,validateOnMount:o,bails:l,type:s,valueProp:u,label:c,validateOnValueUpdate:d}=st((0,be.SU)(e),a),v=Ie(rt),{meta:f,errors:m,handleBlur:p,handleInput:h,resetValidationState:y,setValidationState:g,value:b,checked:V}=ut({name:e,initValue:(0,be.SU)(i),form:v,type:s,valueProp:u}),_=dt(null===v||void 0===v?void 0:v.schema,(0,be.SU)(e)),w=(0,r.Fl)((()=>Pe(_||(0,be.SU)(t)))),S=async()=>{var t;let a;return f.pending=!0,a=v&&v.validateSchema?(await v.validateSchema())[(0,be.SU)(e)]:await Ge(b.value,w.value,{name:(0,be.SU)(c)||(0,be.SU)(e),values:null!==(t=null===v||void 0===v?void 0:v.values)&&void 0!==t?t:{},bails:l}),f.pending=!1,g(a)},F=e=>{var t,a;if(!V||V.value!==(null===(a=null===(t=e)||void 0===t?void 0:t.target)||void 0===a?void 0:a.checked))return b.value=Re(e),f.dirty=!0,d?void 0:S()};o&&(0,r.bv)(S);const k=(0,r.Fl)((()=>m.value[0]));function A(e){f.touched=e}function j(e){f.dirty=e}let O;function E(){d&&(O=(0,r.YP)(b,S,{deep:!0}))}function D(e){null===O||void 0===O||O(),y(e),E()}E();const U={fid:n,name:e,value:b,meta:f,errors:m,errorMessage:k,type:s,valueProp:u,checked:V,idx:-1,resetField:D,handleReset:()=>D(),validate:S,handleChange:F,handleBlur:p,handleInput:h,setValidationState:g,setTouched:A,setDirty:j};if((0,be.dq)(t)&&"function"!==typeof(0,be.SU)(t)&&(0,r.YP)(t,S,{deep:!0}),!v)return U;v.register(U),(0,r.Jd)((()=>{v.unregister(U)}));const M=(0,r.Fl)((()=>{const e=w.value;return!e||Ve(e)||Ve(e.validate)?[]:Object.keys(e).reduce(((e,t)=>{const a=Ye(w.value[t]).map((e=>e.__locatorRef));return e.push(...a),e}),[])}));return(0,r.m0)((()=>{M.value.length&&M.value.forEach((e=>{if(e in v.values&&f.dirty)return S()}))})),U}function st(e,t){const a=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0});return t?Object.assign(Object.assign({},a()),t||{}):a()}function ut({name:e,initValue:t,form:a,type:n,valueProp:i}){var o;const l=(0,be.iH)([]),s=Ie(it,void 0),u=null!==(o=xe((0,be.SU)(s),(0,be.SU)(e)))&&void 0!==o?o:t,{resetMeta:c,meta:d}=ct(u),v=vt(u,e,a);Oe(n)&&u&&(v.value=u);const f=Oe(n)?(0,r.Fl)((()=>Array.isArray(v.value)?v.value.includes((0,be.SU)(i)):(0,be.SU)(i)===v.value)):void 0;(void 0===f||f.value)&&(v.value=u);const m=()=>{d.touched=!0},p=e=>{Oe(n)||(v.value=Re(e)),d.dirty=!0};function h(e){return l.value=e.errors,d.valid=!e.errors.length,e}function y(a){var r;v.value=a&&"value"in a?a.value:null!==(r=xe((0,be.SU)(s),(0,be.SU)(e)))&&void 0!==r?r:t,l.value=(null===a||void 0===a?void 0:a.errors)||[],c(a)}return{meta:d,errors:l,setValidationState:h,resetValidationState:y,handleBlur:m,handleInput:p,value:v,checked:f}}function ct(e){const t=()=>({touched:!1,dirty:!1,valid:!1,pending:!1,initialValue:e}),a=(0,be.qj)(t());function r(e){var r,n,i;const o=t();a.pending=o.pending,a.touched=null!==(r=null===e||void 0===e?void 0:e.touched)&&void 0!==r?r:o.touched,a.dirty=null!==(n=null===e||void 0===e?void 0:e.dirty)&&void 0!==n?n:o.dirty,a.initialValue=null!==(i=null===e||void 0===e?void 0:e.value)&&void 0!==i?i:o.initialValue}return{meta:a,resetMeta:r}}function dt(e,t){if(e)return e[t]}function vt(e,t,a){if(!a)return(0,be.iH)(e);Le(a.values,(0,be.SU)(t),e);const n=(0,r.Fl)({get(){return xe(a.values,(0,be.SU)(t))},set(e){a.setFieldValue((0,be.SU)(t),e)}});return n}const ft=(0,r.aZ)({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:null},validateOnMount:{type:Boolean,default:!1},bails:{type:Boolean,default:()=>Xe().bails},label:{type:String,default:void 0}},setup(e,t){const a=(0,be.Vh)(e,"rules"),n=(0,be.Vh)(e,"name"),i=(0,be.Vh)(e,"label"),{errors:o,value:l,errorMessage:s,validate:u,handleChange:c,handleBlur:d,handleInput:v,setDirty:f,setTouched:m,resetField:p,handleReset:h,meta:y,checked:g}=lt(n,a,{validateOnMount:e.validateOnMount,bails:e.bails,type:t.attrs.type,initialValue:Oe(t.attrs.type)||"modelValue"in t.attrs?t.attrs.modelValue:t.attrs.value,valueProp:t.attrs.value,label:i,validateOnValueUpdate:!1});let b=!1;function V(){b=!0,(0,r.Y3)((()=>{b=!1}))}const _="modelValue"in t.attrs?function(e){c(e),t.emit("update:modelValue",l.value)}:c,w="modelValue"in t.attrs?function(e){v(e),t.emit("update:modelValue",l.value)}:v,{validateOnInput:S,validateOnChange:F,validateOnBlur:k,validateOnModelUpdate:A}=Xe(),j=[d,t.attrs.onBlur,k?u:void 0].filter(Boolean),O=[w,V,S?_:void 0,t.attrs.onInput].filter(Boolean),E=[w,V,F?_:void 0,t.attrs.onChange].filter(Boolean),D=()=>{const a={name:e.name,onBlur:j,onInput:O,onChange:E};return A&&(a["onUpdate:modelValue"]=[_,V]),Oe(t.attrs.type)&&g?a.checked=g.value:a.value=l.value,Ae(mt(e,t),t.attrs.type)&&delete a.value,{field:a,meta:y,errors:o.value,errorMessage:s.value,validate:u,resetField:p,handleChange:_,handleInput:w,handleReset:h,handleBlur:d,setDirty:f,setTouched:m}};return()=>{const a=(0,r.LL)(mt(e,t)),n=D();"modelValue"in t.attrs&&String(t.attrs.modelValue)!==String(l.value)&&!b&&(0,r.Y3)((()=>{c(t.attrs.modelValue)}));const i=ze(t,n);return a?(0,r.h)(a,Object.assign(Object.assign({},t.attrs),n.field),i):i}}});function mt(e,t){let a=e.as||"";return e.as||t.slots.default||(a="input"),a}function pt(e){const t=(0,be.iH)([]),a=(0,be.iH)(!1),n=(0,r.Fl)((()=>t.value.reduce(((e,t)=>{if(!e[t.name])return e[t.name]=t,t.idx=-1,e;if(!Array.isArray(e[t.name])){const a=e[t.name];a.idx=0,e[t.name]=[a]}return t.idx=e[t.name].length,e[t.name].push(t),e}),{}))),i=(0,be.qj)({}),o={},l=(0,r.Fl)((()=>t.value.reduce(((e,t)=>{let a;if(Array.isArray(n.value[t.name])){const e=n.value[t.name];a=(0,be.SU)((e.find((e=>(0,be.SU)(e.checked)))||t).errorMessage)}else a=(0,be.SU)(t.errorMessage);return a&&(e[t.name]=a),e}),{}))),{initialValues:s,setInitialValues:u}=gt(n,i,null===e||void 0===e?void 0:e.initialValues),c=ht(t,s);function d(e,t){const a=n.value[e];a&&(Array.isArray(a)?a.forEach((e=>{e.setValidationState({errors:t?[t]:[]})})):a.setValidationState({errors:t?[t]:[]}))}function v(e){Be(e).forEach((t=>{d(t,e[t])}))}function f(e,t){var a;const r=n.value[e];if(Array.isArray(r)&&"checkbox"===(null===(a=r[0])||void 0===a?void 0:a.type)&&!Array.isArray(t)){const a=xe(i,e),n=Array.isArray(a)?[...a]:[],l=n.indexOf(t);return l>=0?n.splice(l,1):n.push(t),Le(i,e,n),void r.forEach((e=>{o[e.fid]=n}))}let l=t;"checkbox"===(null===r||void 0===r?void 0:r.type)&&(l=xe(i,e)===t?void 0:t),Le(i,e,l),r&&(o[r.fid]=l)}function m(e){Be(e).forEach((t=>{f(t,e[t])}))}function p(e,t){const a=n.value[e];a&&(Array.isArray(a)?a.forEach((e=>e.setTouched(t))):a.setTouched(t))}function h(e){Be(e).forEach((t=>{p(t,!!e[t])}))}function y(e,t){const a=n.value[e];a&&(Array.isArray(a)?a.forEach((e=>e.setDirty(t))):a.setDirty(t))}function g(e){Be(e).forEach((t=>{y(t,!!e[t])}))}const b=e=>{(null===e||void 0===e?void 0:e.values)&&u(e.values),t.value.forEach((e=>e.resetField())),(null===e||void 0===e?void 0:e.dirty)&&g(e.dirty),(null===e||void 0===e?void 0:e.touched)&&h(e.touched),(null===e||void 0===e?void 0:e.errors)&&v(e.errors)};function V(e){t.value.push(e),(0,be.dq)(e.name)&&(0,r.YP)(e.name,(t=>{f(t,o[e.fid])}),{flush:"post"})}function _(e){var a,n;const l=t.value.indexOf(e);if(-1===l)return;t.value.splice(l,1);const s=e.fid;(0,r.Y3)((()=>{delete o[s]}));const u=(0,be.SU)(e.name);if(-1===e.idx)return void Ce(i,u);const c=null===(n=null===(a=xe(i,u))||void 0===a?void 0:a.indexOf)||void 0===n?void 0:n.call(a,(0,be.SU)(e.valueProp));void 0!==c?-1!==c&&(Array.isArray(i[u])?Ce(i,`${u}.${c}`):Ce(i,u)):Ce(i,u)}const w={register:V,unregister:_,fields:n,values:i,schema:null===e||void 0===e?void 0:e.validationSchema,validateSchema:je(null===e||void 0===e?void 0:e.validationSchema)?(e=!1)=>yt(w,e):void 0,setFieldValue:f,setValues:m,setErrors:v,setFieldError:d,setFieldTouched:p,setTouched:h,setFieldDirty:y,setDirty:g,resetForm:b},S=async()=>{if(w.validateSchema)return w.validateSchema(!0).then((e=>Object.keys(e).every((t=>!e[t].errors.length))));const e=await Promise.all(t.value.map((e=>e.validate())));return e.every((e=>!e.errors.length))},F=(0,r.Fl)((()=>t.value.reduce(((e,t)=>(Le(e,t.name,(0,be.SU)(t.value)),e)),{}))),k=e=>function(t){return t instanceof Event&&(t.preventDefault(),t.stopPropagation()),a.value=!0,S().then((a=>{if(a&&"function"===typeof e)return e(F.value,{evt:t,setDirty:g,setFieldDirty:y,setErrors:v,setFieldError:d,setTouched:h,setFieldTouched:p,setValues:m,setFieldValue:f,resetForm:b})})).then((()=>{a.value=!1}),(e=>{throw a.value=!1,e}))},A=k(((e,{evt:t})=>{var a;t&&(null===(a=null===t||void 0===t?void 0:t.target)||void 0===a||a.submit())}));return(0,r.bv)((()=>{(null===e||void 0===e?void 0:e.initialErrors)&&v(e.initialErrors),(null===e||void 0===e?void 0:e.initialDirty)&&g(e.initialDirty),(null===e||void 0===e?void 0:e.initialTouched)&&h(e.initialTouched),(null===e||void 0===e?void 0:e.validateOnMount)&&S()})),(0,r.JJ)(rt,w),(0,r.JJ)(nt,l),{errors:l,meta:c,values:i,validate:S,isSubmitting:a,handleReset:()=>b(),resetForm:b,handleSubmit:k,submitForm:A,setFieldError:d,setErrors:v,setFieldValue:f,setValues:m,setFieldTouched:p,setTouched:h,setFieldDirty:y,setDirty:g}}function ht(e,t){const a={valid:"every",dirty:"some",touched:"some",pending:"some"};return(0,r.Fl)((()=>{const r=Be(a).reduce(((t,r)=>{const n=a[r];return t[r]=e.value[n]((e=>e.meta[r])),t}),{});return Object.assign({initialValues:(0,be.SU)(t)},r)}))}async function yt(e,t=!1){const a=await e.schema.validate(e.values,{abortEarly:!1}).then((()=>[])).catch((e=>{if("ValidationError"!==e.name)throw e;return e.inner||[]})),r=e.fields.value,n=a.reduce(((e,t)=>(e[t.path]=t,e)),{}),i=Be(r).reduce(((e,a)=>{const i=r[a],o=(n[a]||{errors:[]}).errors,l={errors:o};e[a]=l;const s=Array.isArray(i),u=s?i.some((e=>e.meta.dirty)):i.meta.dirty;return t||u?s?(i.forEach((e=>e.setValidationState(l))),e):(i.setValidationState(l),e):e}),{});return i}function gt(e,t,a){const n=(0,be.iH)((0,be.SU)(a)||{}),i=(0,r.Fl)((()=>n.value));function o(a,r=!1){if(n.value=Object.assign(Object.assign({},n.value),a),!r)return;const i=e=>e.meta.dirty||e.meta.touched;Be(e.value).forEach((a=>{const r=e.value[a],o=Array.isArray(r)?r.some(i):i(r);if(o)return;const l=xe(n.value,a);Le(t,a,l)}))}return(0,be.dq)(a)&&(0,r.YP)(a,(e=>{o(e,!0)}),{deep:!0}),(0,r.JJ)(it,i),{initialValues:i,setInitialValues:o}}const bt=(0,r.aZ)({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialDirty:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1}},setup(e,t){const a=(0,be.Vh)(e,"initialValues"),{errors:n,validate:i,handleReset:o,resetForm:l,values:s,meta:u,isSubmitting:c,handleSubmit:d,submitForm:v,setErrors:f,setFieldError:m,setFieldValue:p,setValues:h,setFieldDirty:y,setDirty:g,setFieldTouched:b,setTouched:V}=pt({validationSchema:e.validationSchema,initialValues:a,initialErrors:e.initialErrors,initialTouched:e.initialTouched,initialDirty:e.initialDirty,validateOnMount:e.validateOnMount}),_=t.attrs.onSubmit?d(t.attrs.onSubmit):v;function w(){o(),"function"===typeof t.attrs.onReset&&t.attrs.onReset()}function S(e,t){const a="function"!==typeof e||t?t:e;return d(a)(e)}return function(){"setErrors"in this||(this.setFieldError=m,this.setErrors=f,this.setFieldValue=p,this.setValues=h,this.setFieldDirty=y,this.setDirty=g,this.setFieldTouched=b,this.setTouched=V,this.resetForm=l,this.validate=i);const a=ze(t,{meta:u.value,errors:n.value,values:s,isSubmitting:c.value,validate:i,handleSubmit:S,handleReset:o,submitForm:v,setErrors:f,setFieldError:m,setFieldValue:p,setValues:h,setFieldDirty:y,setDirty:g,setFieldTouched:b,setTouched:V,resetForm:l});if(!e.as)return a;const d="form"===e.as?{novalidate:!0}:{};return(0,r.h)("form"===e.as?e.as:(0,r.LL)(e.as),Object.assign(Object.assign(Object.assign({},d),t.attrs),{onSubmit:_,onReset:w}),a)}}}),Vt=(0,r.aZ)({props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,t){const a=(0,r.f3)(nt,void 0),n=(0,r.Fl)((()=>null===a||void 0===a?void 0:a.value[e.name]));return()=>{const a=ze(t,{message:n.value}),i=e.as?(0,r.LL)(e.as):e.as,o=Object.assign({role:"alert"},t.attrs);return!i&&(null===a||void 0===a?void 0:a.length)?a:(null===a||void 0===a?void 0:a.length)?(0,r.h)(i,o,a):(0,r.h)(i||"span",o,n.value)}}});var _t={account(e){return e?!!/^[a-zA-Z]\w{5,19}$/.test(e)||"字母开头且6-20个字符":"请输入用户名"},password(e){return e?!!/^\w{6,24}$/.test(e)||"密码是6-24字符":"请输入密码"},mobile(e){return e?!!/^1[3-9]\d{9}$/.test(e)||"手机号格式错误":"请输入手机号"},code(e){return e?!!/^\d{6}$/.test(e)||"验证码是六位数字":"请输入验证码"},isAgree(e){return!!e||"请勾选同意用户协议"}},wt=a(4942),St=a(65),Ft=a(678),kt=a(4471);const At=({account:e,password:t})=>(0,kt.Z)("/login","post",{account:e,password:t}),jt=({mobile:e,code:t})=>(0,kt.Z)("/login/code","post",{mobile:e,code:t}),Ot=e=>(0,kt.Z)("/login/code","get",{mobile:e});var Et=a(4419),Dt={name:"LoginForm",components:{Form:bt,Field:ft,ErrorMessage:Vt},setup(){const e=(0,be.iH)(!1),t=(0,be.qj)({isAgree:!0,mobile:null,account:null,password:null,code:null}),{account:a,password:n,mobile:i,code:o,isAgree:l}=_t,s={account:a,password:n,mobile:i,code:o,isAgree:l},u=(0,be.iH)(null);(0,r.YP)(l,(()=>{t.value={isAgree:!0,mobile:null,account:null,password:null,code:null},u.value.resetFrom()}));const c=(0,be.iH)(0),{pause:d,resume:v,isActive:f}=(0,Et.Zv)((()=>{c.value--,c.value<=0&&d()}),1e3,!1),m=async()=>{const e=i(t.value.mobile);!0===e?f.value||(await Ot(t.value.mobile),(0,wt.Z)({type:"success",text:"发送成功"}),c.value=60,v()):u.value.setFieldError("mobile",e)},p=(0,St.oR)(),h=(0,Ft.tv)(),y=(0,Ft.yj)(),g=async()=>{const a=await u.value.validate();if(console.log(a),a)try{let a=null;e.value?(a=await jt(t),console.log(a)):a=await At(t);const{id:r,account:n,nickname:i,avatar:o,token:l,mobile:s}=a.result;p.commit("user/setProfile",{id:r,account:n,nickname:i,avatar:o,token:l,mobile:s}),await p.dispatch("cart/mergeLocalCart"),h.push(y.query.redirectUrl||"/")}catch(r){(0,wt.Z)({type:"error",text:r.response.data.message||"登陆失败"})}};return{isMsgLogin:e,form:t,formSchema:s,formCom:u,submit:g,send:m,time:c}}};const Ut=(0,w.Z)(Dt,[["render",ge],["__scopeId","data-v-0c7bbb53"]]);var Mt=Ut,xt={name:"xtx-login-page",components:{LoginHeader:F,LoginFooter:U,LoginForm:Mt}};const Lt=(0,w.Z)(xt,[["render",c],["__scopeId","data-v-554c6b78"]]);var Tt=Lt}}]);
//# sourceMappingURL=554.56eff9f0.js.map