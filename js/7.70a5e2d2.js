"use strict";(self["webpackChunkerabbit_vue3"]=self["webpackChunkerabbit_vue3"]||[]).push([[7],{9036:function(e,t,a){a.d(t,{K7:function(){return s},NZ:function(){return o},QO:function(){return l}});var r=a(4471);const o=e=>(0,r.Z)("/category","get",{id:e}),s=e=>(0,r.Z)("/search/all","psot",e),l=e=>(0,r.Z)("/goods","get",{id:e})},3007:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var r=a(3396),o=a(7139),s=a(8914);const l=e=>((0,r.dD)("data-v-17fad278"),e=e(),(0,r.Cn)(),e),n={class:"xtx-search-page"},i={class:"container"},c=(0,r.Uk)("首页"),u={class:"wrapper"},d={class:"good-list"},g={key:0,class:"none"},p=l((()=>(0,r._)("img",{src:s,alt:""},null,-1))),h=(0,r.Uk)(" 暂无数据 "),m=[p,h];function v(e,t,a,s,l,p){const h=(0,r.up)("XtxBreadItem"),v=(0,r.up)("XtxBread"),f=(0,r.up)("SearchSort"),_=(0,r.up)("GoodsItem"),k=(0,r.up)("XtxPagination"),w=(0,r.up)("SearchFilter");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",i,[(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h,{to:"/"},{default:(0,r.w5)((()=>[c])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Uk)('搜索 "'+(0,o.zw)(e.$route.query.keyword)+'" 的结果：',1)])),_:1})])),_:1}),(0,r._)("div",u,[(0,r.Wm)(f),(0,r._)("ul",d,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.list,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.id})))),128)),(0,r.Wm)(_,{goods:e.item},null,8,["goods"])]),s.total?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",g,m)),s.total?((0,r.wg)(),(0,r.j4)(k,{key:1,total:s.total,"current-page":s.reqParams.page,"page-size":s.reqParams.pageSize,onCurrentChange:s.changePager},null,8,["total","current-page","page-size","onCurrentChange"])):(0,r.kq)("",!0),(0,r.Wm)(w,{onChangeFilter:s.changeFilter},null,8,["onChangeFilter"])])])])}const f={class:"search-sort"},_={class:"sort"},k=(0,r.Uk)(" 价格排序 ");function w(e,t,a,s,l,n){return(0,r.wg)(),(0,r.iD)("div",f,[(0,r._)("div",_,[(0,r._)("a",{class:(0,o.C_)({active:null===s.sortParams.sortField}),onClick:t[0]||(t[0]=e=>s.changeSort(null)),href:"javascript:;"},"默认排序",2),(0,r._)("a",{href:"javascript:;",class:(0,o.C_)({active:"publishTime"===s.sortParams.sortField}),onClick:t[1]||(t[1]=t=>s.changeSort(e.publishTime))},"最新商品",2),(0,r._)("a",{href:"javascript:;",class:(0,o.C_)({active:"orderNum"===s.sortParams.sortField}),onClick:t[2]||(t[2]=t=>s.changeSort(e.orderNum))},"最高人气",2),(0,r._)("a",{href:"javascript:;",class:(0,o.C_)({active:"evaluateNum"===s.sortParams.sortField}),onClick:t[3]||(t[3]=t=>s.changeSort(e.evaluateNum))},"评论最多",2),(0,r._)("a",{href:"javascript:;",onClick:t[4]||(t[4]=e=>s.changeSort("price"))},[k,(0,r._)("i",{class:(0,o.C_)(["arrow up",{active:"price"===s.sortParams.sortField&&"asc"==s.sortParams.sortMethod}])},null,2),(0,r._)("i",{class:(0,o.C_)(["arrow down",{active:"price"===s.sortParams.sortField&&"desc"==s.sortParams.sortMethod}])},null,2)])])])}var C=a(4870),F={name:"SubSort",emits:["change-filter"],setup(e,{emit:t}){const a=(0,C.qj)({sortField:null,sortMethod:null}),r=e=>{if("price"===e)a.sortField=e,null===a.sortMethod?a.sortMethod="desc":a.sortMethod="desc"===a.sortMethod?"asc":"desc";else{if(a.sortField===e)return;a.sortField=e,a.sortMethod=null}t("change-filter",a)};return{sortParams:a,changeSort:r}}},P=a(89);const S=(0,P.Z)(F,[["render",w],["__scopeId","data-v-4a149a1f"]]);var y=S,M=a(678),b=a(9036),q=a(8020),j={name:"xtx-search-page",components:{SearchSort:y,GoodsItem:q.Z},setup(){const e=(0,M.yj)(),t=(0,C.qj)({page:1,pageSize:10,keyword:e.query.keyword,sortField:null,sortMethod:null}),a=(0,C.iH)([]),o=(0,C.iH)(0),s=async()=>{const{result:e}=await(0,b.K7)(t);console.log("loadData",e),a.value=e.pageData.items,o.value=e.pageData.counts};(0,r.bv)((()=>{s()}));const l=e=>{t.page=e,s()},n=e=>{t.page=1,t.sortField=e.sortField,t.sortMethod=e.sortMethod,s()};return(0,M.ao)(((e,a,r)=>{t.page=1,t.keyword=e.query.keyword,t.sortField=null,t.sortMethod=null,s(),r()})),(0,M.ao)(((e,a,r)=>{t.sortField=null,t.sortMethod=null,r()})),{list:a,total:o,reqParams:t,changePager:l,changeFilter:n}}};const D=(0,P.Z)(j,[["render",v],["__scopeId","data-v-17fad278"]]);var x=D},8914:function(e,t,a){e.exports=a.p+"img/none.243beb2a.png"}}]);
//# sourceMappingURL=7.70a5e2d2.js.map